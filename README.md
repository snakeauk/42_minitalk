# Minitalk

`minitalk` は、42Tokyoのプロジェクトで、シグナルを使用してプロセス間通信（IPC）を実現するプログラムです。このプロジェクトでは、クライアントがサーバーにメッセージを送信し、サーバーがそれを受け取って表示します。

## 概要
- **サーバー**は起動時に自身のプロセスID（PID）を表示し、クライアントからのメッセージを待ち受けます。
- **クライアント**はサーバーのPIDを指定し、文字列メッセージをシグナルを使ってサーバーに送信します。

## 実行

### 1. サーバーとクライアントをコンパイル
`make` コマンドを実行して、`server` と `client` の両方の実行ファイルを生成します。

```bash
make
```

### 2. サーバーを起動
サーバープログラムを起動します。サーバーは自動的にPIDを表示し、クライアントからの接続を待機します。

```bash
./server
```

### 3. クライアントからメッセージを送信
別のターミナルウィンドウを開き、クライアントプログラムを実行します。実行する際には、サーバーのPIDと送信したいメッセージを指定してください。

```bash
./client <PID> <message>
```

- `<PID>`：サーバープロセスのPID（サーバー起動時に表示される番号）。
- `<message>`：サーバーに送信するメッセージ。

例:
```bash
./client 12345 "Hello, Minitalk!"
```

---

## 実装について

- **シグナル送信**：クライアントは、`kill()` 関数を使用してサーバーにシグナルを送信し、メッセージをビット単位でエンコードして伝えます。`SIGUSR1`は1ビット、`SIGUSR2`は0ビットを表します。
- **メッセージ受信**：サーバーはシグナルを受け取ると、対応するビットを解釈して文字を再構成し、完全なメッセージを受け取ると画面に表示します。

---

## エラーハンドリング

- クライアントは引数が不足している場合、Usageメッセージを表示し、正しい使用方法をユーザーに通知します。
- `PID`が無効な場合や、シグナル送信が失敗した場合、エラーを出力するように設計されています。

---

## ファイル構成

- **server.c**：サーバーのメインプログラム。シグナルを受信し、メッセージを再構成します。
- **client.c**：クライアントのメインプログラム。メッセージをビット単位でシグナルとしてサーバーに送信します。
- **utils.c**：PID変換など、共通のユーティリティ関数を含みます。
- **client.h** / **server.h**：各プログラムのヘッダーファイル。

---

## 注意事項

- 実行環境によっては、シグナル送信の速度が影響するため、`usleep`関数で短い遅延を入れています。これは通信の安定性を保つためです。
- プロジェクトはシグナルの順序が重要なため、並行して複数のクライアントを実行すると予期しない動作を引き起こす可能性があります。
